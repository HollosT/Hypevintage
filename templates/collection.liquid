<section class="container" >
  
  
  <div class="row my-5" >
    <h1 class="text-center">{{ collection.title }}</h1>
  </div>

  

  {% paginate collection.products by 5 %}
  
  <div class="row">
    <div class="col-3">
      {% render 'filters.liquid', results: collection %}
    </div>
    
    <div class="col-9">
      <div class="row justify-content-center my-5" id="productsContainer">
        <div class="container d-flex justify-content-between align-items-center">
          {%- comment -%} Active filters {%- endcomment -%}
        
          <div class="active-filters d-flex p-3">
              <a class="py-1 px-4 rounded-pill bg-dark text-white" href="{{ collection.url }}?sort_by={{ collection.sort_by }}" class="active-filters__clear">Clear all</a> 
        
            {%- for filter in collection.filters -%}
              {%- if filter.type == "price_range" -%}
                {%- if filter.min_value.value != nil or filter.max_value.value != nil -%}
                  <a class="active-filters__remove-filter" href="{{ filter.url_to_remove }}">
                    {%- assign min_value = filter.min_value.value | default: 0 -%}
                    {%- assign max_value = filter.max_value.value | default: filter.range_max -%}
                    {{ min_value | money }} - {{ max_value | money }} X
                  </a>
                {%- endif -%}
              {%- else -%}
                {%- for filter_value in filter.active_values -%}
                  <a class="active-filters__remove-filter py-1 px-4 rounded-pill bg-light text-dark" href="{{ filter_value.url_to_remove }}">
                    {{ filter.label }}: {{ filter_value.label }} X
                  </a>
                {%- endfor -%}
              {%- endif- %}
            {%- endfor -%}
          </div>
          {%- comment -%}End of Active filters {%- endcomment -%}

          <div class="collection__sort">
            <select  name="sorting" id="sort_by" class="py-3 px-4 my-3 border border-black">
              {% for option in collection.sort_options %}
                <option value="{{ option.value }}"
                  {% if option.value == collection.sort_by %}
                    selected
                  {% endif %}
                >{{option.name}}</option>
              {% endfor %}
            </select>
          </div>
      
        </div>
         
        {% for product in collection.products %}
          {% assign image = product.featured_media.preview_image %}
          <article class="card" style="width: 10rem;">
            {% if image != blank %}
              <a href="#">
                <img class="card-img-top" src="{{ image | img_url: 'small' }}" alt="{{ product.title }}">
              </a>
              {% else %}
              {{ 'product-1' | placeholder_svg_tag: 'card-img-top' }}       
            {% endif %}
            <div class="card-body">
              <h3><a href="{{ product.url }}">{{ product.title }}</a></h3>
              <p>{{ product.price | money_without_trailing_zeros }}</p>
            </div>
          </article>
          
          {% else %}
          <p>No matches</p>
        {% endfor %}
      </div>
    </div>
      
      
      {% render 'pagination', paginate: paginate %}
      {% endpaginate %}
    </div>

  </section>
  